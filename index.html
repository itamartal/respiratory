<!DOCTYPE html>
<html dir="rtl">
  <head>
    <title>מערכת הנשימה - יובל טל ועמית אופק</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/1.4.2/aframe.min.js"></script>
    <style>
      .info-text {
        position: fixed;
        top: 20px;
        left: 20px;
        color: white;
        z-index: 999;
        background: rgba(0,0,0,0.7);
        padding: 10px;
        border-radius: 5px;
        font-family: Arial, sans-serif;
      }
      
      .tooltip {
        display: none;
        position: fixed;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 10px;
        border-radius: 5px;
        font-family: Arial, sans-serif;
        direction: rtl;
        z-index: 1000;
      }
    </style>
  </head>
  <body>
    <div class="info-text">השתמש במקשי החיצים לתנועה, בעכבר להסתכלות, ובגלגלת העכבר להתקרבות והתרחקות</div>
    <div id="tooltip" class="tooltip"></div>

    <script>
      AFRAME.registerComponent('zoom-controls', {
        init: function () {
          this.camera = this.el;
          window.addEventListener('wheel', (e) => {
            const position = this.camera.getAttribute('position');
            if (e.deltaY < 0) {
              position.z -= 0.5;
            } else {
              position.z += 0.5;
            }
            position.z = Math.min(Math.max(position.z, 2), 10);
            this.camera.setAttribute('position', position);
          });
        }
      });

      AFRAME.registerComponent('hoverable', {
        schema: {
          tooltip: {type: 'string'}
        },
        init: function () {
          this.el.addEventListener('mouseenter', () => {
            const tooltip = document.getElementById('tooltip');
            tooltip.textContent = this.data.tooltip;
            tooltip.style.display = 'block';
          });
          
          this.el.addEventListener('mouseleave', () => {
            const tooltip = document.getElementById('tooltip');
            tooltip.style.display = 'none';
          });
          
          this.el.addEventListener('mousemove', (e) => {
            const tooltip = document.getElementById('tooltip');
            tooltip.style.left = e.clientX + 10 + 'px';
            tooltip.style.top = e.clientY + 10 + 'px';
          });
        }
      });
    </script>

    <a-scene>
      <!-- Background Image -->
      <a-entity position="0 1.6 -2">
        <a-plane width="4" height="3" 
                 material="src: background.jpg; transparent: true; opacity: 0.3">
        </a-plane>
      </a-entity>

      <!-- Environment -->
      <a-sky color="#000033"></a-sky>
      <a-plane position="0 0 0" rotation="-90 0 0" width="30" height="30" color="#112233"></a-plane>

      <!-- Lighting -->
      <a-light type="ambient" color="#fff" intensity="0.5"></a-light>
      <a-light type="point" color="#fff" position="0 5 0" intensity="0.8"></a-light>

      <!-- Combined Body and Respiratory System -->
      <a-entity position="0 1.6 0">
        <!-- Transparent Body Shape -->
        <a-entity>
          <!-- Torso -->
          <a-box position="0 0 0" 
                 width="0.8" height="1.2" depth="0.4" 
                 color="#ffffff" 
                 material="opacity: 0.15">
          </a-box>
          
          <!-- Shoulders -->
          <a-box position="0 0.5 0" 
                 width="1.2" height="0.2" depth="0.4" 
                 color="#ffffff" 
                 material="opacity: 0.15">
          </a-box>
          
          <!-- Neck -->
          <a-cylinder position="0 0.7 0" 
                     radius="0.1" height="0.3" 
                     color="#ffffff" 
                     material="opacity: 0.15">
          </a-cylinder>
          
          <!-- Arms -->
          <a-box position="-0.5 0.3 0" 
                 width="0.2" height="0.8" depth="0.2" 
                 color="#ffffff" 
                 material="opacity: 0.15">
          </a-box>
          <a-box position="0.5 0.3 0" 
                 width="0.2" height="0.8" depth="0.2" 
                 color="#ffffff" 
                 material="opacity: 0.15">
          </a-box>
          
          <!-- Abdomen -->
          <a-box position="0 -0.5 0" 
                 width="0.7" height="0.4" depth="0.4" 
                 color="#ffffff" 
                 material="opacity: 0.15">
          </a-box>
        </a-entity>

        <!-- Head with Face Features -->
        <a-entity position="0 1.2 0">
          <!-- Head Shape -->
          <a-sphere position="0 0.3 0" 
                    radius="0.3" 
                    color="#ffdbac"
                    material="opacity: 0.8">
          </a-sphere>
          
          <!-- Eyes -->
          <a-sphere position="-0.1 0.35 0.25" radius="0.03" color="#ffffff"></a-sphere>
          <a-sphere position="0.1 0.35 0.25" radius="0.03" color="#ffffff"></a-sphere>
          <a-sphere position="-0.1 0.35 0.26" radius="0.015" color="#000000"></a-sphere>
          <a-sphere position="0.1 0.35 0.26" radius="0.015" color="#000000"></a-sphere>
          
          <!-- Nose -->
          <a-entity position="0 0.3 0.3">
            <a-box position="0 0 0" 
                   width="0.1" height="0.1" depth="0.1" 
                   color="#ffdbac">
            </a-box>
            <!-- Nostrils -->
            <a-cylinder position="-0.02 -0.03 0" radius="0.01" height="0.02" color="#333"></a-cylinder>
            <a-cylinder position="0.02 -0.03 0" radius="0.01" height="0.02" color="#333"></a-cylinder>
          </a-entity>
          
          <!-- Mouth -->
          <a-entity position="0 0.15 0.25">
            <a-box position="0 0 0" 
                   width="0.15" height="0.03" depth="0.05" 
                   color="#ff9999">
            </a-box>
          </a-entity>
        </a-entity>

        <!-- Respiratory System -->
        <a-entity position="0 0.3 0">
          <!-- Nasal Cavity -->
          <a-box position="0 0.8 0" 
                 width="0.2" height="0.15" depth="0.2" 
                 color="#ff9999"
                 material="opacity: 0.8"
                 hoverable="tooltip: חלל האף - מסנן, מחמם ומלחלח את האוויר הנכנס"
                 class="interactive">
          </a-box>
          
          <!-- Trachea -->
          <a-cylinder position="0 0.4 0" 
                     height="0.5" 
                     radius="0.05" 
                     color="#ff7777"
                     material="opacity: 0.9"
                     hoverable="tooltip: קנה הנשימה - צינור המוביל אוויר אל הריאות"
                     class="interactive">
          </a-cylinder>

          <!-- Lungs -->
          <a-entity position="0 0.2 0">
            <!-- Left Lung -->
            <a-entity position="-0.2 0 0">
              <a-sphere position="0 0 0" 
                        radius="0.25" 
                        color="#ff6666"
                        material="opacity: 0.7"
                        hoverable="tooltip: ריאה שמאלית - איבר חיוני לחילוף הגזים בגוף"
                        class="interactive">
              </a-sphere>
              <!-- Bronchioles (Left) -->
              <a-entity position="0.1 0 0"
                        hoverable="tooltip: סימפונות - צינורות קטנים המובילים אוויר בתוך הריאות">
                <a-cylinder position="0 0 0" 
                           height="0.2" 
                           radius="0.02" 
                           rotation="0 0 -45" 
                           color="#ff5555">
                </a-cylinder>
                <!-- Alveoli clusters (Left) -->
                <a-entity position="0.1 -0.1 0"
                          hoverable="tooltip: נאדיות - שקיקי אוויר זעירים בהם מתבצע חילוף הגזים">
                  <a-sphere position="0 0 0" radius="0.03" color="#ff4444"></a-sphere>
                  <a-sphere position="0.03 0.03 0" radius="0.03" color="#ff4444"></a-sphere>
                  <a-sphere position="-0.03 0.03 0" radius="0.03" color="#ff4444"></a-sphere>
                </a-entity>
              </a-entity>
            </a-entity>

            <!-- Right Lung -->
            <a-entity position="0.2 0 0">
              <a-sphere position="0 0 0" 
                        radius="0.25" 
                        color="#ff6666"
                        material="opacity: 0.7"
                        hoverable="tooltip: ריאה ימנית - איבר חיוני לחילוף הגזים בגוף"
                        class="interactive">
              </a-sphere>
              <!-- Bronchioles (Right) -->
              <a-entity position="-0.1 0 0"
                        hoverable="tooltip: סימפונות - צינורות קטנים המובילים אוויר בתוך הריאות">
                <a-cylinder position="0 0 0" 
                           height="0.2" 
                           radius="0.02" 
                           rotation="0 0 45" 
                           color="#ff5555">
                </a-cylinder>
                <!-- Alveoli clusters (Right) -->
                <a-entity position="-0.1 -0.1 0"
                          hoverable="tooltip: נאדיות - שקיקי אוויר זעירים בהם מתבצע חילוף הגזים">
                  <a-sphere position="0 0 0" radius="0.03" color="#ff4444"></a-sphere>
                  <a-sphere position="0.03 0.03 0" radius="0.03" color="#ff4444"></a-sphere>
                  <a-sphere position="-0.03 0.03 0" radius="0.03" color="#ff4444"></a-sphere>
                </a-entity>
              </a-entity>
            </a-entity>
          </a-entity>

          <!-- Heart -->
          <a-entity position="0 0.1 -0.1">
            <a-sphere position="0 0 0" 
                      radius="0.15" 
                      color="#cc0000"
                      material="opacity: 0.8"
                      hoverable="tooltip: לב - משאבת הדם של הגוף"
                      class="interactive">
            </a-sphere>
          </a-entity>
        </a-entity>
      </a-entity>

      <!-- Hebrew Labels -->
      <a-entity position="0.8 0 0">
        <a-text value="חלל האף" position="0 3.3 0" color="white" scale="0.5 0.5 0.5"></a-text>
        <a-text value="קנה הנשימה" position="0 3.0 0" color="white" scale="0.5 0.5 0.5"></a-text>
        <a-text value="ריאות" position="0 2.7 0" color="white" scale="0.5 0.5 0.5"></a-text>
        <a-text value="סימפונות" position="0 2.4 0" color="white" scale="0.5 0.5 0.5"></a-text>
        <a-text value="נאדיות" position="0 2.1 0" color="white" scale="0.5 0.5 0.5"></a-text>
        <a-text value="לב" position="0 1.8 0" color="white" scale="0.5 0.5 0.5"></a-text>
      </a-entity>

      <!-- Camera -->
      <a-entity position="0 1.6 5">
        <a-camera look-controls wasd-controls zoom-controls></a-camera>
      </a-entity>

    </a-scene>
  </body>
</html>